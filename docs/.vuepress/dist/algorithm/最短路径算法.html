<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>最短路径算法 | lliiooiill&#39;s FEKA</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="Record the front-end knowledge I learned">
    
    <link rel="preload" href="/assets/css/0.styles.be666823.css" as="style"><link rel="preload" href="/assets/js/app.a53bd3da.js" as="script"><link rel="preload" href="/assets/js/2.6e07443e.js" as="script"><link rel="preload" href="/assets/js/3.854d7f3f.js" as="script"><link rel="preload" href="/assets/js/12.4cf6389d.js" as="script"><link rel="prefetch" href="/assets/js/10.ac634d4c.js"><link rel="prefetch" href="/assets/js/11.264586df.js"><link rel="prefetch" href="/assets/js/13.c4bc5689.js"><link rel="prefetch" href="/assets/js/14.a2823d48.js"><link rel="prefetch" href="/assets/js/15.64ad4689.js"><link rel="prefetch" href="/assets/js/16.8015613a.js"><link rel="prefetch" href="/assets/js/17.6a38d5f1.js"><link rel="prefetch" href="/assets/js/18.876026e2.js"><link rel="prefetch" href="/assets/js/19.d39fcc40.js"><link rel="prefetch" href="/assets/js/20.e462fc2d.js"><link rel="prefetch" href="/assets/js/21.c763382d.js"><link rel="prefetch" href="/assets/js/22.49bbd526.js"><link rel="prefetch" href="/assets/js/23.97dfb942.js"><link rel="prefetch" href="/assets/js/24.d43ff921.js"><link rel="prefetch" href="/assets/js/25.1c5c5e7f.js"><link rel="prefetch" href="/assets/js/26.62be34dc.js"><link rel="prefetch" href="/assets/js/27.0ee507ab.js"><link rel="prefetch" href="/assets/js/28.4a609496.js"><link rel="prefetch" href="/assets/js/29.896e5e99.js"><link rel="prefetch" href="/assets/js/30.0f2bcdc8.js"><link rel="prefetch" href="/assets/js/31.3007f53f.js"><link rel="prefetch" href="/assets/js/32.6aee4080.js"><link rel="prefetch" href="/assets/js/33.4162b069.js"><link rel="prefetch" href="/assets/js/34.d1e4ed7e.js"><link rel="prefetch" href="/assets/js/35.87854729.js"><link rel="prefetch" href="/assets/js/36.cf5802e2.js"><link rel="prefetch" href="/assets/js/37.45465e30.js"><link rel="prefetch" href="/assets/js/38.cc2a8b81.js"><link rel="prefetch" href="/assets/js/39.4fa7defb.js"><link rel="prefetch" href="/assets/js/4.e6bb1dee.js"><link rel="prefetch" href="/assets/js/40.cba659c6.js"><link rel="prefetch" href="/assets/js/41.abd62463.js"><link rel="prefetch" href="/assets/js/42.388e7c0e.js"><link rel="prefetch" href="/assets/js/43.e3746a08.js"><link rel="prefetch" href="/assets/js/44.f7716d81.js"><link rel="prefetch" href="/assets/js/45.1705a059.js"><link rel="prefetch" href="/assets/js/46.66339b17.js"><link rel="prefetch" href="/assets/js/47.e1c03767.js"><link rel="prefetch" href="/assets/js/48.d1b81210.js"><link rel="prefetch" href="/assets/js/49.8f3c542c.js"><link rel="prefetch" href="/assets/js/5.b212736d.js"><link rel="prefetch" href="/assets/js/50.34f9fb63.js"><link rel="prefetch" href="/assets/js/51.73f4ee02.js"><link rel="prefetch" href="/assets/js/52.07bb7535.js"><link rel="prefetch" href="/assets/js/53.800d4f57.js"><link rel="prefetch" href="/assets/js/6.fc59c772.js"><link rel="prefetch" href="/assets/js/7.fc14ad3b.js"><link rel="prefetch" href="/assets/js/8.ea8c8d94.js"><link rel="prefetch" href="/assets/js/9.6cfd3258.js">
    <link rel="stylesheet" href="/assets/css/0.styles.be666823.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-51b244cd><header class="navbar" data-v-51b244cd><a href="/" class="home-link router-link-active"><!----> <span class="site-name">lliiooiill's FEKA</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/basement/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link router-link-active">
  算法
</a></div><div class="nav-item"><a href="/framework/" class="nav-link">
  框架
</a></div><div class="nav-item"><a href="/technicalTopics/" class="nav-link">
  技术专题
</a></div><div class="nav-item"><a href="https://longgererer.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/Longgererer/front-end-knowledge-accumulate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-51b244cd></div> <aside class="sidebar sidebar sidebar-unfold" data-v-51b244cd><nav class="nav-links"><div class="nav-item"><a href="/basement/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link router-link-active">
  算法
</a></div><div class="nav-item"><a href="/framework/" class="nav-link">
  框架
</a></div><div class="nav-item"><a href="/technicalTopics/" class="nav-link">
  技术专题
</a></div><div class="nav-item"><a href="https://longgererer.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/Longgererer/front-end-knowledge-accumulate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/algorithm/" aria-current="page" class="sidebar-link">前端算法</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>算法</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/algorithm/搜索算法.html" class="sidebar-link">搜索算法</a></li><li><a href="/algorithm/排序算法.html" class="sidebar-link">排序算法</a></li><li><a href="/algorithm/深度优先和广度优先.html" class="sidebar-link">深度优先和广度优先</a></li><li><a href="/algorithm/最短路径算法.html" class="active sidebar-link">最短路径算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/algorithm/最短路径算法.html#dijkstra-迪克斯彻-算法" class="sidebar-link">Dijkstra（迪克斯彻）算法</a></li><li class="sidebar-sub-header"><a href="/algorithm/最短路径算法.html#floyd-弗洛伊德-算法" class="sidebar-link">Floyd（弗洛伊德）算法</a></li><li class="sidebar-sub-header"><a href="/algorithm/最短路径算法.html#bellman-ford-贝尔曼-福特-算法" class="sidebar-link">Bellman-Ford （贝尔曼-福特） 算法</a></li></ul></li><li><a href="/algorithm/贪婪动态规划.html" class="sidebar-link">贪婪&amp;动态规划</a></li></ul></section></li></ul> </aside> <div class="sidebar-button sidebar-button" data-v-51b244cd><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <main class="page" data-v-51b244cd> <div class="theme-default-content content__default"><h1 id="最短路径算法"><a href="#最短路径算法" class="header-anchor">#</a> 最短路径算法</h1> <h2 id="dijkstra-迪克斯彻-算法"><a href="#dijkstra-迪克斯彻-算法" class="header-anchor">#</a> Dijkstra（迪克斯彻）算法</h2> <blockquote><p>学习了离散数学之后，我一直对 <code>Djikstra</code> 算法(求最短路径)非常感兴趣，我想能不能用 <code>JS</code> 实现最短路径的算法</p></blockquote> <p>假设一个无向图是这样的：</p> <img src="http://picstore.lliiooiill.cn/5d099ad0019c726019.jpg" width="400"> <p>如何计算从 v1 至各个点的最短路径呢？</p> <p>乍一眼看过去结果很明显，但在实际应用中往往比这张图复杂得多</p> <p>为了获取图中的信息，我们需要先把上图转换为邻接矩阵：</p> <p><img src="http://picstore.lliiooiill.cn/5d1320b18d53869152.jpg" alt="截图未命名.jpg"></p> <p>这里 i 表示 <code>infinite</code> (无穷大)，表示两个点互不相连。</p> <p>在 JS 中用二维数组表示矩阵：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> matrix <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>获取顶点个数和行数：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> dots <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length
<span class="token keyword">const</span> cols <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>检验邻接矩阵是否正确：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>length <span class="token operator">!==</span> dots<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'邻接矩阵数据错误'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>声明一个长度为六的数组，并将其所有元素填充为 <code>Infinity</code>：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> finDistance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>dots<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>因为 v1 到 v1 距离为 0，所以把数组第一个元素设为 0：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>finDistance<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>接下来就是最为重要的环节了，首先两点间的距离必须小于 <code>Infinity</code>才能够相连，需要比较起始点几个相连点之间的距离，选择最短距离的那个点相连：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> dots<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>finDistance<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">Infinity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> cols<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> finDistance<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> finDistance<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        finDistance<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> finDistance<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>finDistance<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>可以看到路径是如何一步一步推算出来的：</p> <p><img src="http://picstore.lliiooiill.cn/5d09b24fbfa2751847.jpg" alt="截图未命名.jpg"></p> <p>我们可以将其封装为一个函数方便使用：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">dijkstra</span><span class="token punctuation">(</span><span class="token parameter">matrix<span class="token punctuation">,</span> startDot <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dots <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length
  <span class="token keyword">const</span> cols <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>length <span class="token operator">!==</span> dots <span class="token operator">||</span> startDot <span class="token operator">&gt;</span> dots <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'邻接矩阵数据错误'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> finDistance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>dots<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>
  finDistance<span class="token punctuation">[</span>startDot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> dots<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>finDistance<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">Infinity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> cols<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> finDistance<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> finDistance<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          finDistance<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> finDistance<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> finDistance
<span class="token punctuation">}</span>

<span class="token keyword">const</span> matrix <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> shortest <span class="token operator">=</span> <span class="token function">dijkstra</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p><code>Dijkstra</code> 算法是一种贪心算法，它不能够计算带权为负的图，这是因为下一条路径都是由当前更短的路径衍生出来的路径，不存在回溯的过程，也就是说前面的路经定下来就不能够修改了。如果权值存在负数，有可能需要回溯才能找到更短的路径，这样不满足 <code>Dijkstra</code> 的机制</p> <p>此算法时间复杂度为 <code>O(N^2)</code></p> <h2 id="floyd-弗洛伊德-算法"><a href="#floyd-弗洛伊德-算法" class="header-anchor">#</a> Floyd（弗洛伊德）算法</h2> <p>该算法的实现非常简洁，与 Dijkstra 算法类似，与之不同的是，<code>Floyd</code>算法用到了二重初始化和三重 for 循环</p> <p>还是用上边的例子</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> matrix <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
<span class="token keyword">let</span> finDistance <span class="token operator">=</span> <span class="token function">floyd</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">floyd</span><span class="token punctuation">(</span><span class="token parameter">matrix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dots <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> dots<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> dots<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> dots<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> matrix<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> matrix
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><code>Floyd</code> 算法是一个采用动态规划思想的算法，这个算法看上去非常简单，只需要三重 <code>for</code> 循环加上一个判断大小的语句，一开始我非常怀疑这个算法的准确性，但事实证明，这个算法确实能够得到最短路径</p> <p>这个算法涉及到三个点，假设 i 为起点，j 为终点，k 为中间点，那么要得到 i 到 j 的最短距离，首先要找到 i 到 k 的最短距离和 j 到 k 的最短距离。由于 k 是中间点，所以 k 的 <code>for</code> 循环一定要写在外面。这个算法的核心大概就是这样子的：</p> <p><img src="https://www.zhihu.com/equation?tex=f%5Bk%5D%5Bi%5D%5Bj%5D%3Dmin%28d%5Bk-1%5D%5Bi%5D%5Bj%5D%2Cd%5Bk-1%5D%5Bi%5D%5Bk%5D%2Bd%5Bk-1%5D%5Bk%5D%5Bj%5D%29" alt="1"></p> <p>此算法时间复杂度为 <code>O(N^3)</code></p> <h2 id="bellman-ford-贝尔曼-福特-算法"><a href="#bellman-ford-贝尔曼-福特-算法" class="header-anchor">#</a> Bellman-Ford （贝尔曼-福特） 算法</h2> <p><code>Bellman-Ford</code> 算法是一种可以计算负权边的算法，但是他不能计算负权回路，负权回路指的是一个环上权值之和为负数，在这种情况下 <code>Bellman-Ford</code> 算法就会陷入死循环，为只要在负权回路上不断兜圈子，所得的最短路长度可以任意小。</p> <p>一下面这幅图为例：</p> <p><img src="data:image/png;base64,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" alt="1"></p> <p>由于是有向图，我们需要知道路径的方向和权值：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> vertices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">]</span> <span class="token comment">//点</span>
<span class="token keyword">const</span> edges <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">//边，u表示起始点，v表示终点，w是权值</span>
  <span class="token punctuation">{</span> u<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> v<span class="token operator">:</span> <span class="token string">'B'</span><span class="token punctuation">,</span> w<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> u<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> v<span class="token operator">:</span> <span class="token string">'C'</span><span class="token punctuation">,</span> w<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> u<span class="token operator">:</span> <span class="token string">'B'</span><span class="token punctuation">,</span> v<span class="token operator">:</span> <span class="token string">'C'</span><span class="token punctuation">,</span> w<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> u<span class="token operator">:</span> <span class="token string">'B'</span><span class="token punctuation">,</span> v<span class="token operator">:</span> <span class="token string">'D'</span><span class="token punctuation">,</span> w<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> u<span class="token operator">:</span> <span class="token string">'C'</span><span class="token punctuation">,</span> v<span class="token operator">:</span> <span class="token string">'D'</span><span class="token punctuation">,</span> w<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>我们可以定义一个 Graph 类用于初始化：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Graph</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Graph</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//防止重复创建实例</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>nodes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//图的节点集</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>edges <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//图的边集</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>table <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//节点标识表</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>在定义两个构造函数构建对象用来存放节点信息和边的信息：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Node</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Edge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Edge</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Edge</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>u <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>v <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>w <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>在 <code>Graph</code> 中初始化节点和边：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">initNodes</span><span class="token punctuation">(</span><span class="token parameter">ns</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token keyword">of</span> ns<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    v<span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>nodes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">initEdges</span><span class="token punctuation">(</span><span class="token parameter">es</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> r <span class="token keyword">of</span> es<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token function">Edge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span>u <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span>v <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span>w <span class="token operator">=</span> r<span class="token punctuation">.</span>w<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>初始化之后，需要初始化最短距离，默认为无穷大：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">BellmanFord</span><span class="token punctuation">(</span><span class="token parameter">nodes<span class="token punctuation">,</span> edges<span class="token punctuation">,</span> startNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> distance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//存放从起点到任意节点的最短路径</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> nodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    distance<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  distance<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>startNode<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//初始化起始点最短路径为0</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>然后需要对各个点进行松弛操作：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> len <span class="token operator">=</span> nodes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> e <span class="token keyword">of</span> edges<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>u<span class="token punctuation">)</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>w <span class="token operator">&lt;</span> distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      distance<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>v<span class="token punctuation">,</span> distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>u<span class="token punctuation">)</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>w<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>由于 <code>Bellman-Ford</code> 算法不能计算负权环，所以我们要检测是不是有负权环的存在：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> e <span class="token keyword">of</span> edges<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>u<span class="token punctuation">)</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>w <span class="token operator">&lt;</span> distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">//返回null表示包涵负权回路</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>完整代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Graph</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Graph</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//防止重复创建实例</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>nodes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//图的节点集</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>edges <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//图的边集</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>table <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//节点标识表</span>
  <span class="token punctuation">}</span>
  <span class="token function">initNodes</span><span class="token punctuation">(</span><span class="token parameter">vs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token keyword">of</span> vs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      v<span class="token punctuation">.</span>id <span class="token operator">=</span> id
      <span class="token keyword">this</span><span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>nodes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">initEdges</span><span class="token punctuation">(</span><span class="token parameter">es</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> r <span class="token keyword">of</span> es<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token function">Edge</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      e<span class="token punctuation">.</span>u <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>u<span class="token punctuation">)</span>
      e<span class="token punctuation">.</span>v <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>v<span class="token punctuation">)</span>
      e<span class="token punctuation">.</span>w <span class="token operator">=</span> r<span class="token punctuation">.</span>w
      <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Node</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//用来标识节点</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//节点数据</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Edge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Edge</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Edge</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>u <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>v <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>w <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">BellmanFord</span><span class="token punctuation">(</span><span class="token parameter">nodes<span class="token punctuation">,</span> edges<span class="token punctuation">,</span> source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> distance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//用来记录从原节点 source 到某个节点的最短路径估计值</span>
  <span class="token comment">// 第一步: 初始化图</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> nodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    distance<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">)</span> <span class="token comment">// 初始化最短估计距离 默认无穷大</span>
  <span class="token punctuation">}</span>
  distance<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 将源节点的最短路径估计距离 初始化为0</span>
  <span class="token comment">// 第二步: 重复松弛边</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> len <span class="token operator">=</span> nodes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> e <span class="token keyword">of</span> edges<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>u<span class="token punctuation">)</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>w <span class="token operator">&lt;</span> distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        distance<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>v<span class="token punctuation">,</span> distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>u<span class="token punctuation">)</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>w<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 第三步: 检查是否有负权回路 第三步必须在第二步后面</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> e <span class="token keyword">of</span> edges<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>u<span class="token punctuation">)</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>w <span class="token operator">&lt;</span> distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">//返回null表示包涵负权回路</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    distance<span class="token operator">:</span> distance
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> nodes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">]</span> <span class="token comment">//点</span>
<span class="token keyword">const</span> edges <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">//边，u表示起始点，v表示终点，w是权值</span>
  <span class="token punctuation">{</span> u<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> v<span class="token operator">:</span> <span class="token string">'B'</span><span class="token punctuation">,</span> w<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> u<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> v<span class="token operator">:</span> <span class="token string">'C'</span><span class="token punctuation">,</span> w<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> u<span class="token operator">:</span> <span class="token string">'B'</span><span class="token punctuation">,</span> v<span class="token operator">:</span> <span class="token string">'C'</span><span class="token punctuation">,</span> w<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> u<span class="token operator">:</span> <span class="token string">'B'</span><span class="token punctuation">,</span> v<span class="token operator">:</span> <span class="token string">'D'</span><span class="token punctuation">,</span> w<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> u<span class="token operator">:</span> <span class="token string">'C'</span><span class="token punctuation">,</span> v<span class="token operator">:</span> <span class="token string">'D'</span><span class="token punctuation">,</span> w<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
g<span class="token punctuation">.</span><span class="token function">initNodes</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span>
g<span class="token punctuation">.</span><span class="token function">initEdges</span><span class="token punctuation">(</span>edges<span class="token punctuation">)</span>
<span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token function">BellmanFord</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>nodes<span class="token punctuation">,</span> g<span class="token punctuation">.</span>edges<span class="token punctuation">,</span> g<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div><p>控制台输出：</p> <p><img src="http://picstore.lliiooiill.cn/5d0dc5f84e75695098.jpg" alt="截图未命名.jpg"></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后修改于:</span> <span class="time">6/21/2021, 10:20:03 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      🔙
      <a href="/algorithm/深度优先和广度优先.html" class="prev">
        深度优先和广度优先
      </a></span> <span class="position-blank"></span> <span class="next"><a href="/algorithm/贪婪动态规划.html">
        贪婪&amp;动态规划
      </a>
      💨
    </span></p></div>  <section style="border-top:2px solid #eaecef;padding-top:1rem;margin-top:2rem;" data-v-39529c6c><div class="line" data-v-39529c6c></div> <div class="read-count" data-v-39529c6c><span data-flag-title="Your Article Title" class="leancloud-visitors" data-v-39529c6c><span class="post-meta-item-text" data-v-39529c6c>👁️‍🗨️ </span> <span class="leancloud-visitors-count" data-v-39529c6c></span></span></div> <h3 data-v-39529c6c><a href="javascript:;" data-v-39529c6c></a>
    评论💬：
  </h3> <div id="valine-vuepress-comment" data-v-39529c6c></div></section></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a53bd3da.js" defer></script><script src="/assets/js/2.6e07443e.js" defer></script><script src="/assets/js/3.854d7f3f.js" defer></script><script src="/assets/js/12.4cf6389d.js" defer></script>
  </body>
</html>
