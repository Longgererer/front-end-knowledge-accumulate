(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{403:function(t,s,n){"use strict";n.r(s);var a=n(44),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"eventloop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#eventloop"}},[t._v("#")]),t._v(" EventLoop")]),t._v(" "),n("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯-event-loop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯-event-loop"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯ Event Loop")]),t._v(" "),n("p",[t._v("å…³äº Event Loop çš„å®šä¹‰ï¼ŒMDN ä¸Šå¯¹å…¶è¿›è¡Œäº†è§£é‡Šï¼š")]),t._v(" "),n("blockquote",[n("p",[t._v("JavaScript has a concurrency model based on an event loop, which is responsible for executing the code, collecting and processing events, and executing queued sub-tasks.")])]),t._v(" "),n("p",[t._v("å¤§æ„ä¸ºï¼šEvent Loop æ˜¯ä¸€ä¸ªåŸºäº"),n("strong",[t._v("äº‹ä»¶å¾ªç¯")]),t._v("çš„å¹¶å‘æ¨¡å‹ï¼Œäº‹ä»¶å¾ªç¯è´Ÿè´£æ‰§è¡Œä»£ç ã€æ”¶é›†å’Œå¤„ç†äº‹ä»¶ä»¥åŠæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å­ä»»åŠ¡ã€‚")]),t._v(" "),n("p",[t._v("å…·ä½“æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™å°±è¦è¯´è¯´"),n("strong",[t._v("æ‰§è¡Œæ ˆ")]),t._v("å’Œ"),n("strong",[t._v("äº‹ä»¶é˜Ÿåˆ—")]),t._v("äº†ï¼š")]),t._v(" "),n("p",[t._v("æ‰§è¡Œæ ˆä¹Ÿè¢«å«åšè°ƒç”¨æ ˆï¼Œæ—¢ç„¶æ˜¯æ ˆï¼Œå½“ç„¶æ˜¯éµå¾ªå…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡ºçš„é¡ºåºï¼Œè¿™ä¸ªæ‰§è¡Œæ ˆç”¨äº"),n("strong",[t._v("å‚¨å­˜ä»£ç åœ¨æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("æˆ‘ä»¬å¯ä»¥ç”¨ä¸€å°æ®µä»£ç æ¥æ›´å¥½åœ°è§£é‡Šæ‰§è¡Œæ ˆï¼š")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("b")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("b")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'456'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br")])]),n("p",[t._v("è¿™æ®µä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰§è¡Œæ ˆä¸­å‘ç”Ÿäº†è¿™äº›äº‹æƒ…ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("é¦–å…ˆæ‰§è¡Œå‡½æ•° aï¼Œa å…¥æ ˆ")]),t._v(" "),n("li",[t._v("æ‰§è¡Œ"),n("code",[t._v("console.log('123')")]),t._v("ï¼Œ"),n("code",[t._v("console.log('123')")]),t._v("å…¥æ ˆ")]),t._v(" "),n("li",[n("code",[t._v("console.log('123')")]),t._v("å‡ºæ ˆï¼Œæ‰§è¡Œå‡½æ•° bï¼Œb å…¥æ ˆ")]),t._v(" "),n("li",[t._v("æ‰§è¡Œ"),n("code",[t._v("console.log('456')")]),t._v("ï¼Œ"),n("code",[t._v("console.log('456')")]),t._v("å…¥æ ˆ")]),t._v(" "),n("li",[n("code",[t._v("console.log('456')")]),t._v("å‡ºæ ˆ")]),t._v(" "),n("li",[t._v("å‡½æ•° b å‡ºæ ˆ")]),t._v(" "),n("li",[t._v("å‡½æ•° a å‡ºæ ˆ")])]),t._v(" "),n("p",[t._v("é…åˆ gif é£Ÿç”¨æ›´å¥½ç†è§£ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/11/23/FdoiGN4ckPnzxVO.gif",alt:"GIF.gif"}})]),t._v(" "),n("p",[t._v("ä»¥ä¸Šçš„ç»“æœæ˜¯åœ¨æ‰§è¡ŒåŒæ­¥ä»£ç çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ˜¯æ‰§è¡Œå¼‚æ­¥ä»£ç å°±ä¸æ˜¯è¿™æ ·å­äº†ï¼Œå› ä¸ºå¼‚æ­¥æ˜¯éé˜»å¡çš„ï¼Œæ‰€ä»¥å®ƒä»¬ä¼šè¢«æŒ‚èµ·æ”¾åˆ°ç‰¹å®šé˜Ÿåˆ—ä¸­ï¼Œä¹Ÿå°±æ˜¯"),n("strong",[t._v("äº‹ä»¶é˜Ÿåˆ—")]),t._v("ï¼Œç»§ç»­æ‰§è¡Œæ‰§è¡Œæ ˆä¸­çš„å…¶ä»–åŒæ­¥ä»»åŠ¡ï¼Œç­‰å¾…åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œæ ˆç©ºäº†ï¼Œæ‰ä¼šå°†é˜Ÿåˆ—ä¸­çš„å¼‚æ­¥äº‹ä»¶ä¾æ¬¡å–å‡ºå…¥æ ˆæ‰§è¡Œã€‚")]),t._v(" "),n("h2",{attrs:{id:"å•çº¿ç¨‹çš„-javascript"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å•çº¿ç¨‹çš„-javascript"}},[t._v("#")]),t._v(" å•çº¿ç¨‹çš„ JavaScript")]),t._v(" "),n("p",[t._v("æ‰€è°“çš„ â€œJavaScript æ˜¯å•çº¿ç¨‹çš„â€ å¹¶ä¸æ˜¯è¯´ JavaScript å’Œå•çº¿ç¨‹å¤šçº¿ç¨‹æœ‰ä»»ä½•å…³ç³»ï¼Œè€Œæ˜¯è¯´ JavaScript è¿è¡Œçš„ç¯å¢ƒå†³å®šäº†å®ƒæ˜¯å·²å•çº¿ç¨‹çš„å½¢å¼è¿è¡Œçš„ã€‚")]),t._v(" "),n("p",[t._v("H5 ä¸­æœ‰ä¸€ä¸ªæ–°ç‰¹æ€§ Web workerï¼Œè™½ç„¶å¯ä»¥æ–°å¼€è¾Ÿä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œä½†è¿™ä¸ªçº¿ç¨‹ä»ç„¶åªæ˜¯ä¾æ‰˜åœ¨ä¸»çº¿ç¨‹ä¸‹é¢çš„å­çº¿ç¨‹ï¼Œå¹¶ä¸”ä¸å¯ä»¥æ“ä½œ dom ç»“ç‚¹ä»¥åŠæ–‡ä»¶è®¿é—®ï¼Œåªèƒ½è¿›è¡Œè¿ç®—å’Œ AJAX è¯·æ±‚ï¼ˆå­çº¿ç¨‹å’Œä¸»çº¿ç¨‹çš„å¼‚æ­¥è¯·æ±‚éƒ½å…±ç”¨åŒä¸€ä¸ª Event Loopï¼‰ï¼Œå› æ­¤è¿™åªæ˜¯ä¸ªæ¨¡æ‹Ÿå‡ºæ¥çš„å¤šçº¿ç¨‹ï¼Œä¸ä»£è¡¨ JavaScript çœŸçš„æ˜¯ä»¥å¤šçº¿ç¨‹å½¢å¼è¿è¡Œã€‚")]),t._v(" "),n("h2",{attrs:{id:"è¯¦è§£-event-loop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¯¦è§£-event-loop"}},[t._v("#")]),t._v(" è¯¦è§£ Event Loop")]),t._v(" "),n("p",[t._v("æŠŠè¯¥äº†è§£çš„éƒ½äº†è§£äº†ï¼Œå°±è¦è¿›å…¥æ­£é¢˜äº†ï¼šå¼‚æ­¥ä»£ç æ˜¯æŒ‰ç…§ä»€ä¹ˆé¡ºåºæ‰§è¡Œçš„ï¼Ÿ")]),t._v(" "),n("p",[t._v("å¼‚æ­¥å’ŒåŒæ­¥ä¸åŒï¼Œæ˜¾ç„¶ä¸æ˜¯æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œæ¥çœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼š")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'console'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("p",[t._v("ä¸ç”¨æˆ‘è¯´ï¼Œè¾“å‡ºé¡ºåºæ˜¯ "),n("code",[t._v("start end console")]),t._v("ï¼Œä»£ç æ‰§è¡Œä¸­å‘ç”Ÿäº†è¿™äº›äº‹æƒ…ï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("console.log('start')")]),t._v(" å‹å…¥æ ˆä¸­æ‰§è¡Œï¼Œæ‰§è¡Œå®Œå‡ºæ ˆ")]),t._v(" "),n("li",[n("code",[t._v("setTimeout")]),t._v(" å…¥æ ˆï¼Œè¿™æ—¶æµè§ˆå™¨çš„"),n("strong",[t._v("å®šæ—¶è§¦å‘çº¿ç¨‹")]),t._v("å¼€å§‹è®¡æ—¶")]),t._v(" "),n("li",[n("code",[t._v("console.log('end')")]),t._v(" å‹å…¥æ ˆä¸­æ‰§è¡Œï¼Œæ‰§è¡Œå®Œå‡ºæ ˆ")]),t._v(" "),n("li",[t._v("1000 æ¯«ç§’è®¡æ—¶ç»“æŸï¼Œå°†å›è°ƒå‡½æ•°æ”¾åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­")]),t._v(" "),n("li",[t._v("æ£€æŸ¥æ‰§è¡Œæ ˆä¸­æ˜¯å¦ä¸ºç©ºï¼Œæ‰§è¡Œæ ˆä¸ºç©ºï¼Œå°†äº‹ä»¶é˜Ÿåˆ—ä¸­çš„å›è°ƒå‡½æ•°å–å‡ºæ”¾å…¥æ‰§è¡Œæ ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œå‡ºæ ˆ")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/11/23/qD3ioK21lHRxVbz.gif",alt:"GIF.gif"}})]),t._v(" "),n("p",[t._v("ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—çŸ¥è¿™ä¸ªå®šæ—¶å™¨é‡Œçš„ 1000ï¼Œå¹¶ä¸ä»£è¡¨ç¨‹åºè¿è¡Œ 1000 æ¯«ç§’åä¼šå‡†æ—¶æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œè€Œæ˜¯å°†å›è°ƒæ”¾åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­è€Œå·²ï¼ŒçœŸæ­£æ‰§è¡Œå›è°ƒçš„å»¶è¿Ÿæ—¶é—´è‚¯å®šå¤§äº 1000 æ¯«ç§’ã€‚")]),t._v(" "),n("p",[t._v("æ˜ç™½äº†è¿™ä¸ªé“ç†ï¼Œ"),n("code",[t._v("setTimeout(()=>{}, 0)")]),t._v(" æˆ‘ä»¬ä¹Ÿèƒ½æ˜ç™½å°±æ˜¯åœ¨æ‰§è¡Œæ ˆä¸ºç©ºçš„æ—¶å€™ç«‹å³æ‰§è¡Œå›è°ƒï¼Œè€Œä¸æ˜¯ä¸€è¿è¡Œç¨‹åºå°±é©¬ä¸Šæ‰§è¡Œå›è°ƒã€‚")]),t._v(" "),n("h3",{attrs:{id:"å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"}},[t._v("#")]),t._v(" å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡")]),t._v(" "),n("p",[t._v("æˆ‘ä»¬çŸ¥é“ï¼Œå¼‚æ­¥å›è°ƒä¼šè¢«æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œå®é™…ä¸Šï¼Œäº‹ä»¶é˜Ÿåˆ—åˆ†ä¸ºä¸¤ç§ï¼š"),n("strong",[t._v("å®ä»»åŠ¡")]),t._v("(macro-task)é˜Ÿåˆ—å’Œ"),n("strong",[t._v("å¾®ä»»åŠ¡")]),t._v("(micro-task)é˜Ÿåˆ—ï¼Œæ¥çœ‹çœ‹å¸¸è§å¼‚æ­¥ä»»åŠ¡å¯¹åº”çš„é˜Ÿåˆ—ï¼š")]),t._v(" "),n("p",[n("strong",[t._v("å®ä»»åŠ¡")]),t._v("ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("script æ•´ä½“ä»£ç ")]),t._v(" "),n("li",[t._v("setTimeout")]),t._v(" "),n("li",[t._v("setInterval")]),t._v(" "),n("li",[t._v("I/O")]),t._v(" "),n("li",[t._v("dom ç»‘å®šäº‹ä»¶")]),t._v(" "),n("li",[t._v("postMessage")]),t._v(" "),n("li",[t._v("MessageChannel")]),t._v(" "),n("li",[t._v("requestAnimationFrame")]),t._v(" "),n("li",[t._v("setImmediate(node.js)")])]),t._v(" "),n("p",[n("strong",[t._v("å¾®ä»»åŠ¡")]),t._v("ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("Promise.then")]),t._v(" "),n("li",[t._v("Object.observe(åºŸå¼ƒ)")]),t._v(" "),n("li",[t._v("MutaionObserver")]),t._v(" "),n("li",[t._v("process.nextTick(node.js)")])]),t._v(" "),n("p",[t._v("é‚£ä¹ˆå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºåˆæ˜¯å¦‚ä½•å‘¢ï¼Ÿ")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setTimeout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'newPromise'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'then'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("p",[t._v("è¾“å‡ºé¡ºåºï¼š"),n("code",[t._v("start newPromise end then setTimeout")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ç®€è¦è¯´ä¸‹å¤§è‡´æ‰§è¡Œæµç¨‹ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("æ‰§è¡Œå®ä»»åŠ¡(æ•´ä¸ª script)")]),t._v(" "),n("li",[t._v("è¾“å‡º start")]),t._v(" "),n("li",[t._v("å°† setTimeout å›è°ƒæ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—")]),t._v(" "),n("li",[t._v("è¾“å‡º newPromise")]),t._v(" "),n("li",[t._v("å°† promise.then å›è°ƒæ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—")]),t._v(" "),n("li",[t._v("è¾“å‡º end")]),t._v(" "),n("li",[t._v("ç¬¬ä¸€è½®ç»“æŸï¼Œæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º")]),t._v(" "),n("li",[t._v("æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡")]),t._v(" "),n("li",[t._v("è¾“å‡º then")]),t._v(" "),n("li",[t._v("ç¬¬äºŒè½®ç»“æŸï¼Œæ£€æŸ¥å®ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º")]),t._v(" "),n("li",[t._v("æ‰§è¡Œæ‰€æœ‰å®ä»»åŠ¡")]),t._v(" "),n("li",[t._v("è¾“å‡º setTimeout")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/11/24/sBJuhIkD8Wv9XoK.gif",alt:"GIF.gif"}})]),t._v(" "),n("p",[t._v("ç”±æ­¤å¯å¾—çŸ¥ï¼Œå®ä»»åŠ¡å…ˆäºå¾®ä»»åŠ¡æ‰§è¡Œï¼Œæ³¨æ„ï¼š"),n("strong",[t._v("æ¯æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œéƒ½è¦æ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œå¦åˆ™æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡")]),t._v("ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¾®ä»»åŠ¡æ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ªæ‰§è¡Œçš„ï¼Œå®ä»»åŠ¡æ˜¯ä¸€ä¸ªä¸€ä¸ªåˆ†å¼€æ‰§è¡Œçš„(è¿™æ ·è¯´å¯èƒ½æœ‰ç‚¹åˆ«æ‰­ï¼Œä½†æˆ‘ä¸€æ—¶æƒ³ä¸å‡ºæ›´å¥½çš„è§£é‡Š(ï¼ _ï¼ ğŸ˜‰)ã€‚")]),t._v(" "),n("blockquote",[n("p",[t._v("æœ‰ä¸€äº›äººè®¤ä¸ºå¾®ä»»åŠ¡çš„ä¼˜å…ˆçº§æ˜¯é«˜äºå®ä»»åŠ¡çš„ï¼Œè¿™æ˜¯å› ä¸ºä»–ä»¬å¿½ç•¥äº†æ•´ä½“ scriptï¼Œå®é™…ä¸Šæ•´ä¸ª script ä¹Ÿæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œåœ¨æ‰§è¡Œä»»ä½•ä¸€ä¸ª script æ–‡ä»¶çš„æ—¶å€™ï¼Œjs å¼•æ“éƒ½ä¼šå°†å†…å®¹åŒ…è£…åœ¨å‡½æ•°ä¸­ï¼Œå¹¶å°†è¯¥å‡½æ•°ä¸ start æˆ– start äº‹ä»¶å…³è”ï¼Œè¿™ä¸ªäº‹ä»¶å°†è¢«æ·»åŠ åˆ°å®ä»»åŠ¡ä¸­ã€‚")])]),t._v(" "),n("h4",{attrs:{id:"ä¼˜å…ˆçº§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜å…ˆçº§"}},[t._v("#")]),t._v(" ä¼˜å…ˆçº§")]),t._v(" "),n("p",[t._v("æ—¢ç„¶å®ä»»åŠ¡å…ˆäºå¾®ä»»åŠ¡æ‰§è¡Œï¼Œé‚£ä¹ˆå®ä»»åŠ¡ä¹‹é—´ï¼Œå¾®ä»»åŠ¡ä¹‹é—´æ˜¯å¦ä¹Ÿæœ‰ä¼˜å…ˆçº§å‘¢ï¼Ÿ")]),t._v(" "),n("p",[t._v("ç­”æ¡ˆæ˜¯æœ‰ï¼ï¼ï¼")]),t._v(" "),n("p",[n("strong",[t._v("å®ä»»åŠ¡ä¼˜å…ˆçº§")]),t._v("ï¼š")]),t._v(" "),n("p",[t._v("script æ•´ä½“ä»£ç  > setImmediate > MessageChannel > setTimeout / setInterval")]),t._v(" "),n("p",[n("strong",[t._v("å¾®ä»»åŠ¡ä¼˜å…ˆçº§")]),t._v("ï¼š")]),t._v(" "),n("p",[t._v("process.nextTick > Promise > MutationObserver")]),t._v(" "),n("h4",{attrs:{id:"settimeout-å’Œ-setimmediate-å­°å…ˆå­°å"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#settimeout-å’Œ-setimmediate-å­°å…ˆå­°å"}},[t._v("#")]),t._v(" setTimeout å’Œ setImmediate å­°å…ˆå­°å")]),t._v(" "),n("p",[t._v("æˆ‘ä»¬è¯´ setImmediate ä¼˜å…ˆçº§æ˜¯é«˜äº setTimeoutï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦è®¨è®ºå‘¢ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼š")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("789")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("p",[t._v("æŒ‰ç…§ä¼˜å…ˆçº§æ’åºï¼Œç­”æ¡ˆå¾ˆæ˜æ˜¾æ˜¯å…ˆè¾“å‡º 789ï¼Œåè¾“å‡º endï¼Œç„¶é¹…ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/11/24/GIDE7RPl4MUKAJy.png",alt:"1606192520.png"}})]),t._v(" "),n("p",[t._v("æ²¡é”™ï¼Œæˆ‘è¿è¡Œäº†ä¸¤éï¼Œå› ä¸ºç¬¬ä¸€æ¬¡æ‰§è¡Œå¾—å‡ºçš„ç»“æœå’Œæˆ‘é¢„æƒ³çš„ä¸åŒï¼Œæ‰§è¡Œç¬¬äºŒæ¬¡æˆ‘å‘ç° setImmediate å’Œ setTimeout çš„å›è°ƒæ‰§è¡Œé¡ºåºå®Œå…¨æ˜¯éšæœºçš„ï¼")]),t._v(" "),n("p",[t._v("è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ¥çœ‹çœ‹ node å®˜æ–¹æ–‡æ¡£çš„è§£é‡Šï¼š")]),t._v(" "),n("blockquote",[n("p",[t._v("For example, if we run the following script which is not within an I/O cycle (i.e. the main module), the order in which the two timers are executed is non-deterministic, as it is bound by the performance of the process")])]),t._v(" "),n("p",[t._v("æ„æ€æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬"),n("strong",[t._v("ç›´æ¥åœ¨ä¸»æ¨¡å—ä¸‹é¢ç›´æ¥è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå…¶å›è°ƒæ‰§è¡Œé¡ºåºæ˜¯éšæœºçš„")]),t._v("ï¼Œå› ä¸ºè¿™å—åˆ°äº†è¿›ç¨‹æ€§èƒ½çš„é™åˆ¶(è¿™å¯èƒ½ä¼šå—åˆ°è®¡ç®—æœºä¸Šè¿è¡Œçš„å…¶ä»–åº”ç”¨ç¨‹åºçš„å½±å“)ï¼Œä½†å¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ª I/O å‘¨æœŸå†…è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå°±ç¬¦åˆ setImmediate>setTimeout è¿™ä¸ªè¯´æ³•ï¼š")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nfs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__filename"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'timeout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'immediate'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br")])]),n("h2",{attrs:{id:"ç»ƒä¹ "}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç»ƒä¹ "}},[t._v("#")]),t._v(" ç»ƒä¹ ")]),t._v(" "),n("p",[t._v("ç°åœ¨æˆ‘ä»¬æ¥çœ‹è¿™æ®µæ¯”è¾ƒé•¿çš„ä»£ç å·©å›ºä¸€ä¸‹çŸ¥è¯†ï¼š")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'timer1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'then1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'then2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'process1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br")])]),n("p",[t._v("æ¥åˆ†æåˆ†æï¼š")]),t._v(" "),n("ul",[n("li",[t._v("é¦–å…ˆè¾“å‡º "),n("code",[t._v("start")])]),t._v(" "),n("li",[t._v("ç¬¬ä¸€ä¸ª setTimeout ç®€ç§° Timer1 çš„å›è°ƒè¿›å…¥äº†å®ä»»åŠ¡é˜Ÿåˆ—")]),t._v(" "),n("li",[t._v("è¾“å‡º "),n("code",[t._v("promise2")])]),t._v(" "),n("li",[t._v("ç¬¬äºŒä¸ª setTimeout ç®€ç§° Timer2 çš„å›è°ƒè¿›å…¥äº†å®ä»»åŠ¡é˜Ÿåˆ—")]),t._v(" "),n("li",[t._v("process.nextTick çš„å›è°ƒè¿›å…¥äº†å¾®ä»»åŠ¡é˜Ÿåˆ—")]),t._v(" "),n("li",[t._v("è¾“å‡º "),n("code",[t._v("end")])])]),t._v(" "),n("p",[t._v("è‡³æ­¤ç¬¬ä¸€è½®å¾ªç¯ç»“æŸï¼Œå¼€å§‹ç¬¬äºŒè½®ï¼Œæ£€æµ‹å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼šprocess.nextTick")]),t._v(" "),n("ul",[n("li",[t._v("process.nextTick å…¥æ ˆï¼Œè¾“å‡º"),n("code",[t._v("process1")])])]),t._v(" "),n("p",[t._v("å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºï¼Œæ£€æµ‹å®ä»»åŠ¡é˜Ÿåˆ—ï¼šTimer1ï¼ŒTimer2")]),t._v(" "),n("ul",[n("li",[t._v("Timer1 å…¥æ ˆï¼Œè¾“å‡º"),n("code",[t._v("timer1")])]),t._v(" "),n("li",[t._v("è¾“å‡º "),n("code",[t._v("promise1")])]),t._v(" "),n("li",[t._v("ç¬¬ä¸€ä¸ª promise.then ç®€ç§° Then1 çš„å›è°ƒè¿›å…¥äº†å¾®ä»»åŠ¡é˜Ÿåˆ—")])]),t._v(" "),n("p",[t._v("æ£€æµ‹å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼šThen1")]),t._v(" "),n("ul",[n("li",[t._v("Then1 å…¥æ ˆï¼Œç¬¬ä¸‰ä¸ª setTimeout ç®€ç§° Timer3 çš„å›è°ƒè¿›å…¥äº†å®ä»»åŠ¡é˜Ÿåˆ—")])]),t._v(" "),n("p",[t._v("å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºï¼Œæ£€æµ‹å®ä»»åŠ¡é˜Ÿåˆ—ï¼šTimer2ï¼ŒTimer3")]),t._v(" "),n("ul",[n("li",[t._v("Timer2 å…¥æ ˆï¼Œç¬¬äºŒä¸ª promise.then ç®€ç§° Then2 çš„å›è°ƒè¿›å…¥äº†å¾®ä»»åŠ¡é˜Ÿåˆ—")])]),t._v(" "),n("p",[t._v("æ£€æµ‹å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼šThen2")]),t._v(" "),n("ul",[n("li",[t._v("Then2 å…¥æ ˆï¼Œè¾“å‡º"),n("code",[t._v("then2")])])]),t._v(" "),n("p",[t._v("å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºï¼Œæ£€æµ‹å®ä»»åŠ¡é˜Ÿåˆ—ï¼šTimer3")]),t._v(" "),n("ul",[n("li",[t._v("Timer3 å…¥æ ˆï¼Œè¾“å‡º"),n("code",[t._v("then1")])])]),t._v(" "),n("p",[t._v("å®Œæ•´çš„è¾“å‡ºä¸ºï¼š")]),t._v(" "),n("div",{staticClass:"language-dash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("start\npromise2\nend\nprocess1\ntimer1\npromise1\nthen2\nthen1\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br")])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("Notice")]),t._v(" "),n("p",[t._v("ä»¥ä¸Šæ‰€æœ‰ä¾‹å­çš„è¾“å‡ºç»“æœéƒ½æ˜¯åœ¨ node12 çš„ç¯å¢ƒä¸‹è¿è¡Œï¼Œè€ç‰ˆæœ¬å¯èƒ½è¾“å‡ºç»“æœä¼šä¸ä¸€æ ·ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"æ‰©å±•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ‰©å±•"}},[t._v("#")]),t._v(" æ‰©å±•")]),t._v(" "),n("h3",{attrs:{id:"requestanimationframe"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#requestanimationframe"}},[t._v("#")]),t._v(" requestAnimationFrame")]),t._v(" "),n("p",[t._v("æˆ‘ä»¬åœ¨ä¸Šé¢çš„å†…å®¹é‡Œä¸»è¦å…³æ³¨çš„æ˜¯ä»»åŠ¡é˜Ÿåˆ—ä¸­å›è°ƒçš„æ‰§è¡Œé¡ºåºï¼Œä½†å®é™…ä¸Šåœ¨ JS çº¿ç¨‹æ‰§è¡Œå®Œä¹‹åï¼Œæµè§ˆå™¨"),n("strong",[t._v("å¯èƒ½")]),t._v("ä¼šè¿›è¡Œ GUI æ¸²æŸ“ï¼Œä¹‹æ‰€ä»¥è¯´å¯èƒ½ï¼Œæ˜¯å› ä¸º"),n("strong",[t._v("æ¯æ¬¡æ‰§è¡Œå®Œå®ä»»åŠ¡å¹¶ä¸ä¸€å®šè¿›è¡Œ GUI æ¸²æŸ“")]),t._v("ï¼Œæ¯æ¬¡è¿›è¡Œ GUI æ¸²æŸ“çš„é—´éš”ä¸º 16ms å·¦å³ï¼Œå› ä¸ºæµè§ˆå™¨åˆ·æ–°é¢‘ç‡ä¸º 60HZï¼Œ1000/60â‰ˆ16msã€‚")]),t._v(" "),n("p",[t._v("requestAnimationFrame ç®€ç§° RAFï¼Œå…¶ä½œç”¨å°±æ˜¯è®©æµè§ˆå™¨æµç•…çš„æ‰§è¡ŒåŠ¨ç”»æ•ˆæœï¼Œåœ¨è¿›è¡Œ GUI æ¸²æŸ“çš„æ—¶å€™ï¼Œå°±éœ€è¦ç”¨åˆ° RAFï¼ŒRAF æ‰§è¡Œå®Œåï¼Œåœ¨è¿›è¡Œé‡ç»˜ã€‚")]),t._v(" "),n("p",[t._v("ä½¿ç”¨ requestAnimationFrame åå¸§åŠ¨ç”»å¾€å¾€æ¯” setTimeout æ›´å…·æ•ˆç‡ï¼Œæ€§èƒ½æ›´é«˜ã€‚")]),t._v(" "),n("h2",{attrs:{id:"ä½¿ç”¨å·¥å…·"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨å·¥å…·"}},[t._v("#")]),t._v(" ä½¿ç”¨å·¥å…·")]),t._v(" "),n("p",[n("a",{attrs:{href:"http://latentflip.com/loupe/",target:"_blank",rel:"noopener noreferrer"}},[t._v("loupe æŸ¥çœ‹æ‰§è¡Œæ ˆå’Œäº‹ä»¶é˜Ÿåˆ—å·¥å…·"),n("OutboundLink")],1)]),t._v(" "),n("h2",{attrs:{id:"å‚è€ƒæ–‡ç« "}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒæ–‡ç« "}},[t._v("#")]),t._v(" å‚è€ƒæ–‡ç« ")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop",target:"_blank",rel:"noopener noreferrer"}},[t._v("Concurrency model and the event loop"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/48590085",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€è¯‘ã€‘ç†è§£ Javascript æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/33058983",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¯¦è§£ JavaScript ä¸­çš„ Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰æœºåˆ¶"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/78113300",target:"_blank",rel:"noopener noreferrer"}},[t._v("js ä¸­çš„å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/#setimmediate-vs-settimeout",target:"_blank",rel:"noopener noreferrer"}},[t._v("The Node.js Event Loop, Timers, and process.nextTick()"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6844903512845860872",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);